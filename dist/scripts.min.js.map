{"version":3,"sources":["webpack://2sic-bootstrap-content-templates/./src/ts/content-fancybox.ts","webpack://2sic-bootstrap-content-templates/./src/ts/get-script.ts","webpack://2sic-bootstrap-content-templates/./src/ts/google-maps.ts","webpack://2sic-bootstrap-content-templates/./src/ts/google-maps/maps-jquery.ts","webpack://2sic-bootstrap-content-templates/./src/ts/jquery-fade-in.ts","webpack://2sic-bootstrap-content-templates/./src/ts/mail-obfuscator.ts","webpack://2sic-bootstrap-content-templates/./src/ts/youtube-preview.ts","webpack://2sic-bootstrap-content-templates/webpack/bootstrap","webpack://2sic-bootstrap-content-templates/./src/ts/index.ts"],"names":["$","fancybox","source","callback","script","document","createElement","prior","getElementsByTagName","async","onload","onreadystatechange","_","isAbort","readyState","test","undefined","setTimeout","src","parentNode","insertBefore","debug","winAny","window","googleMapLoadDeferred","Deferred","alreadyActivating","turnOnMap","turnOn","console","log","id","marker","zoom","lat","lng","info","arguments","toGoogleMap","position","mapTypeId","infoWindowHtml","showInfoWindow","icon","showKeyWarnings","buildMap","data","showApiKeyWarning","googleMapsApiKey","indexOf","googleMapsElem","length","each","elem","this","hasClass","addClass","append","objToExpandWhenDone","registerToGoogleMap","googleMapsLoading","keyWithoutWarning","replace","getScript","then","googleMapLoadCallback","state","resolve","mapsLoadedPromise","fn","options","mapElement","get","promise","settings","extend","mapOptions","mapTypeControl","center","zoomControl","scaleControl","scrollwheel","google","maps","MapTypeId","map","Map","Marker","infoWindow","InfoWindow","content","event","addListener","open","addListenerOnce","jQueryProto","__proto__","fadeIn","not","$this","maddr","attr","linktext","after","hide","youtubeElem","off","on","iframeId","iframeElem","youtubeUrl","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","win2Ext","appC","appContent","activateAll","activateObfuscatedMails","activateFancybox","activateYouTubePreviews","activateGoogleMaps","monkeyPatchjQueryFade"],"mappings":"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","file":"scripts.min.js","sourcesContent":["/* Fancybox */\r\nexport function activateFancybox() {\r\n  // TODO: 2dm - must ask 2ro/2tl why different from gallery\r\n  // and if this won't break each other\r\n  if ($('.fancybox').fancybox) {\r\n    $('.fancybox').fancybox();\r\n  }\r\n}\r\n","// https://stackoverflow.com/a/28002292/6834738\r\nexport function getScript(source: string, callback: any) {\r\n  var script = document.createElement('script');\r\n  var prior = document.getElementsByTagName('script')[0];\r\n  (script as any).async = 1;\r\n\r\n  (script as any).onload = (script as any).onreadystatechange = function( _: any, isAbort: any ) {\r\n      if(isAbort || !(script as any).readyState || /loaded|complete/.test((script as any).readyState) ) {\r\n          script.onload = (script as any).onreadystatechange = null;\r\n          script = undefined;\r\n\r\n          if(!isAbort && callback) setTimeout(callback, 0);\r\n      }\r\n  };\r\n\r\n  script.src = source;\r\n  prior.parentNode.insertBefore(script, prior);\r\n}\r\n","import { getScript } from './get-script';\r\nimport { MapDefinition } from './google-maps/map-definition';\r\nimport { registerToGoogleMap } from './google-maps/maps-jquery';\r\n\r\nconst debug = true;\r\nconst winAny = window as any;\r\n// let readyToProcessQueue = false;\r\n\r\n// This will be completed once google maps loaded - for listener to wait for\r\nconst googleMapLoadDeferred = $.Deferred();\r\n\r\nlet alreadyActivating = false;\r\n\r\n/* Boot Google Maps with the API Key */\r\nexport function activateGoogleMaps(objToExpandWhenDone: any) {\r\n  \r\n  // Change this GoogleApiKey. They are in the App-Settings. Read instructions here: https://azing.org/2sxc/r/ippFQYkz\r\n  if(!winAny.googleMapsApiKey) return;\r\n  if(alreadyActivating) return;\r\n  alreadyActivating = true;\r\n\r\n  registerToGoogleMap(googleMapLoadDeferred, debug);\r\n\r\n  // Load Google Maps if not already loading (prevent duplicate inits)\r\n  if (!winAny.googleMapsLoading) {\r\n    winAny.googleMapsLoading = true;\r\n    const keyWithoutWarning = winAny.googleMapsApiKey.replace(\"warning!\", \"\");\r\n    getScript(\"//maps.google.com/maps/api/js?key=\" + keyWithoutWarning + \"&sensor=true&callback=googleMapLoadCallback\", null);\r\n  }\r\n\r\n  googleMapLoadDeferred.then(function() {\r\n    if(debug) console.log('maps loaded - will attach turnOnMap');\r\n    objToExpandWhenDone.turnOnMap = turnOnMap;\r\n  });\r\n}\r\n\r\n\r\n// Callback which google-maps will trigger automatically when loaded\r\nwinAny.googleMapLoadCallback = function() {\r\n  if(debug) console.log('googleMapLoadCallback');\r\n  googleMapLoadDeferred.state\r\n  googleMapLoadDeferred\r\n    .resolve(true)\r\n    // process the queue after init, in case something is waiting\r\n    // .then(() => {\r\n    //   readyToProcessQueue = true;\r\n    //   processQueue();\r\n    // })\r\n    ;\r\n}\r\n\r\nfunction turnOnMap(turnOn: any) {\r\n  if(debug) console.log('turn on map', turnOn);\r\n  buildMap(turnOn.data);\r\n}\r\n\r\n// TODO: SET ID to be the full id\r\nfunction buildMap({id, marker, zoom, lat, lng, info} : MapDefinition) {\r\n  console.log('build map', id, marker, arguments);\r\n\r\n  ($(\"#GoogleMap-\" + id) as any).toGoogleMap({\r\n    position: {\r\n      lat: lat,\r\n      lng: lng\r\n    },\r\n    zoom: zoom,\r\n    mapTypeId: \"ROADMAP\",\r\n    infoWindowHtml: info,\r\n    showInfoWindow: false,\r\n    icon: marker\r\n  });\r\n\r\n  showKeyWarnings();\r\n};\r\n\r\n// /**\r\n//  * Process the queue on window.appContent.mapQueue if there is something to process\r\n//  */\r\n// export function processQueue() {\r\n//   if(!readyToProcessQueue) return;\r\n//   var mapQueue = winAny?.appContent?.mapQueue as Function[];\r\n//   if(mapQueue?.length) {\r\n//     mapQueue.forEach(fn => {\r\n//       fn();\r\n//     });\r\n//     showKeyWarnings();\r\n//     // reset queue\r\n//     winAny.appContent.mapQueue = new Array<Function>();\r\n//   }\r\n// }\r\n\r\n\r\n\r\nfunction showKeyWarnings() {\r\n  const showApiKeyWarning = winAny.googleMapsApiKey.indexOf(\"warning!\") > -1;\r\n  if(!showApiKeyWarning) return;\r\n\r\n  const googleMapsElem = $('.co-google-map-container');\r\n\r\n  // check if it's the original key, which shouldn't be used in live sites\r\n  // do not turn this off, it's important!\r\n  // to disable the warning, replace the API key as explained on //github.com/2sic/2sxc-content-bootstrap3/wiki/google-maps-api-key\r\n  function showWarningIfDemoKeyIsUsed(elem: HTMLElement) {\r\n    if (showApiKeyWarning && !$(elem).hasClass('has-warning')) {\r\n      $(elem).addClass('has-warning');\r\n      $(elem).append('<p class=\"alert alert-danger googlemap-apiwarning\"><strong>Warning:</strong> This map uses a demo API-Key, which will cause problems on live web sites. Change the GoogleApiKey using <a class=\"alert-link target=\"_blank\" href=\"https://azing.org/2sxc/r/ippFQYkz\" target=\"_blank\">these instructions</a></p>');\r\n    }\r\n  }\r\n\r\n  if(googleMapsElem.length != 0)\r\n    googleMapsElem.each(function() {\r\n      showWarningIfDemoKeyIsUsed(this);\r\n    });\r\n}","// This will be attached to window once google is loaded\r\ndeclare const google : any;\r\n\r\n// the init-code\r\nexport function registerToGoogleMap(mapsLoadedPromise: JQuery.Deferred<any, any, any>, debug: boolean) {\r\n  if(debug) console.log('giveJqueryMaps-before');\r\n\r\n  // if this had already been run, stop here\r\n  if (($.fn as any).toGoogleMap) return;\r\n\r\n  if(debug) console.log('giveJqueryGoogleMaps-after check');\r\n\r\n\r\n  ($.fn as any).toGoogleMap = function (options: any) {\r\n      var mapElement = this.get(0);\r\n\r\n        mapsLoadedPromise.promise().then(function () {\r\n\r\n          var settings = $.extend({\r\n              position: {\r\n                  lat: 0,\r\n                  lng: 0\r\n              },\r\n              zoom: 8,\r\n              mapTypeId: \"HYBRID\",\r\n              infoWindowHtml: \"\",\r\n              showInfoWindow: true\r\n          }, options);\r\n\r\n          var mapOptions = {\r\n              zoom: settings.zoom,\r\n              mapTypeControl: true,\r\n              center: settings.position,\r\n              zoomControl: true,\r\n              scaleControl: true,\r\n              scrollwheel: false,\r\n              mapTypeId: google.maps.MapTypeId[settings.mapTypeId]\r\n          };\r\n\r\n          var map = new google.maps.Map(mapElement, mapOptions);\r\n\r\n          // Create Marker\r\n          var marker = new google.maps.Marker({\r\n              position: settings.position,\r\n              map: map,\r\n              icon: settings.icon\r\n          });\r\n\r\n          if (settings.infoWindowHtml && settings.infoWindowHtml !== '') {\r\n              // Create InfoWindow\r\n              var infoWindow = new google.maps.InfoWindow({\r\n                  content: settings.infoWindowHtml\r\n              });\r\n              // Add Event listener\r\n              google.maps.event.addListener(marker, 'click', function () {\r\n                  infoWindow.open(map, marker);\r\n              });\r\n          }\r\n\r\n          google.maps.event.addListenerOnce(map, 'idle', function () {\r\n              if (settings.showInfoWindow)\r\n                  infoWindow.open(map, marker);\r\n          });\r\n\r\n      });\r\n\r\n      return this;\r\n  };\r\n\r\n  if(debug) console.log('giveJqueryGoogleMaps-after');\r\n}","/** \r\n * In case jQuery slim is loaded, fadeIn is missing and would cause errors\r\n * So we check for that and just put an empty function there\r\n */\r\nexport function monkeyPatchjQueryFade() {\r\n  const jQueryProto = ($() as any).__proto__;\r\n  if(!jQueryProto.fadeIn)\r\n    jQueryProto.fadeIn = function () { /* do nothing */ }\r\n}","\r\nexport function activateObfuscatedMails() {\r\n  /* mailencrypting */\r\n  setTimeout(function () {\r\n    $('[data-madr1]').not('.madr-done').each(function () {\r\n      const $this = $(this);\r\n      const maddr = $this.attr('data-madr1') + '@' + $this.attr('data-madr2') + '.' + $this.attr('data-madr3');\r\n      const linktext = $this.attr('data-linktext') ? $this.attr('data-linktext') : maddr;\r\n      $this.after('<a href=\"mailto:' + maddr + '\">' + linktext + '</a> ');\r\n      $this.addClass('madr-done').hide();\r\n    });\r\n  }, 500);\r\n}","export function activateYouTubePreviews() {\r\n  var youtubeElem = $(\"[data-youtube^='iframe-']\");\r\n  // If youtube element is on page\r\n  if(youtubeElem.length != 0) {\r\n\r\n    // goes through all youtube elements\r\n    youtubeElem.each(function() {\r\n      // off removes click event - so its only added once\r\n      // add click event\r\n      $(this).off('click').on('click', function(){\r\n        var iframeId = $(this).data(\"youtube\");\r\n        var iframeElem = $(\"#\" + iframeId);\r\n        var youtubeUrl = iframeElem.data(\"youtube-src\");\r\n        iframeElem.attr(\"src\", youtubeUrl);\r\n        $(this).addClass('hide');\r\n      })\r\n    });  \r\n  }\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { monkeyPatchjQueryFade } from './jquery-fade-in';\r\nimport { activateObfuscatedMails } from './mail-obfuscator';\r\nimport { activateYouTubePreviews } from './youtube-preview';\r\nimport { activateFancybox } from './content-fancybox';\r\nimport { activateGoogleMaps } from './google-maps';\r\n\r\n// so it can be called from the HTML when content re-initializes dynamically\r\nconst win2Ext = (window as any);\r\nconst appC = win2Ext.appContent = win2Ext.appContent || {};\r\n\r\n/** activate all the content-app features */\r\nfunction activateAll() {\r\n  // console.log('activate all');\r\n  activateObfuscatedMails();\r\n  activateFancybox();\r\n  activateYouTubePreviews();\r\n  activateGoogleMaps(appC);\r\n}\r\n\r\n// Work around a limitation of jQuery if it's installed in slim mode\r\n$(monkeyPatchjQueryFade);\r\n\r\n// Add window.appContent.activateAll() \r\nappC.activateAll = appC.activateAll || activateAll;\r\n// appC.processQueue = appC.processQueue || processQueue;\r\n\r\n// If loaded the first time on a dynamic page, activate automatically\r\n// Later reloads will need to call the activateAll from the reloaded content\r\n$(activateAll);\r\n"],"sourceRoot":""}