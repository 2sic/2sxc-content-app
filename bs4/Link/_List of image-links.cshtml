@inherits ToSic.Sxc.Dnn.RazorComponent
@using ToSic.Razor.Blade;
@* This adds all link/script tags *@
@RenderPage("../shared/_Assets.cshtml", new { parts = "styles,scripts,height"})

@{
  // get helper commands
  var Helpers = CreateInstance("../../shared/_Helpers.cshtml");
}

<div class="co-container-outer mb-4 mb-md-5 co-linkblock">
	<div class="co-container-inner">
		<div class="row">
			@foreach (var link in AsDynamic(Data["Default"])) {
				var linkInfo = Helpers.LinkInfos(link.Link, link.Window, link.Icon);

				<div class="mb-4 col-12 col-md-6 col-lg-4" @Edit.TagToolbar(link)>
				
            @if(Text.Has(link.Image)) {
              <figure>
                <div class="overlay"></div>
                @(Tag.Img()
                  .Class("img-fluid mb-2")
                  .Src(link.Image + "?w=690&h=345&quality=80&mode=crop&scale=both")
                  .Alt(link.Title))
              </figure>
            } else {
              <div class="co-img-placeholder"></div>
            }
          <h3>@link.Title</h3>
          @if(Text.Has(link.Description)) {
            <p>@Html.Raw(Tags.Nl2Br(link.Description))</p>
          }
          @* @if(linkInfo.Found) {
            <span class="co-link">@link.LinkText&nbsp;<span class="" aria-hidden="true">&rsaquo;</span></span>
            @Tag.A().TagEnd
          } *@
          	@if(linkInfo.Found) {
            @Tag.A().Class("stretched-link").Wrap(link.LinkText,Tag.Span("&nbsp;&rsaquo;")).Title(link.Title).Href(link.Link).Target(linkInfo.Window)
          }
				</div>
			}
		</div>
	</div>
</div>