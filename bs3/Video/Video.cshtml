@inherits Custom.Hybrid.Razor14
@using ToSic.Razor.Blade;
@{
  /* This Template is used in ca. 5 Views which show title, text and video */

  var isTextFirst = Settings.TextFirst;

  // Determine the widths of each part, based on 12 Bootstrap Cols
  const int bootstrapCols = 12;
  var colsText = Settings.TextFirst ? Settings.ColsElement1 : bootstrapCols - Settings.ColsElement1;
  var colsImg = bootstrapCols - colsText;
  
  var allContent = AsList(Data);
  var allContentLength = allContent.Count();
  var hasMultipleItems = allContentLength > 1;
}

@* If it's a list of items, also show edit-options for the header to allow configuring how the list should show *@
@Html.Partial("../shared/Content List Header.cshtml", new { HasMultipleItems = hasMultipleItems })

@* Show all the content-items - one or more *@
@for (var i = 0; i < allContentLength; i++)
{
  var item = allContent.ElementAt(i);
  <div class="co-container-outer mb-4 mb-md-5">
    <div class="co-container-inner clearfix co-content" @Edit.TagToolbar(item)>
      <div class='row @(i == (allContentLength - 1) ? "" : "mb-4 mb-lg-5")'>
        <div class='col-md-@colsText @(isTextFirst ? "" : "col-md-push-" + @colsImg)'>
          @* call sub-template to show the title with the correct H1-H6 tag *@
          @Html.Partial("../shared/Header tag.cshtml", new { Title = item.Title })

          @* If the image doesn't have it's own column, its between title/text *@
          @if (colsImg == 0) {
            @Html.Partial("Part Video.cshtml", new { Columns = 12, Video = item })
          }

          @Html.Raw(item.Text)
        </div>
        @* If the image has it's own column, it's here *@
        @if (colsImg != 0) {
          <div class='col-md-@colsImg @(isTextFirst ?  "" : "col-md-pull-" + @colsText)'>
            @Html.Partial("Part Video.cshtml", new { Columns = colsImg, Video = item })
          </div>
        }
      </div>
    </div>
  </div>
}

@Html.Partial("../shared/Assets.cshtml", new { parts = "icons, scripts" })